<% layout("/layouts/boilerplate") -%>

  <body>
    <!-- <h3>All Listings</h3>
    <form method="GET" action="/listings/new">
      <button>Create New Listing</button>
    </form> -->
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 2rem;
      }
  
      .row {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.5rem;
      }
  .card-container {
  display: flex;
  justify-content: space-between; 
  flex-wrap: wrap;
  gap: 20px; 
  padding: 20px;
}

  .card {
   flex: 1 1 calc(33.333% - 40px); 
  max-width: 350px;
  border: 1px solid #ddd;
  border-radius: 10px;
  overflow: hidden;
  background-color: #fff;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
} 
  
      .card:hover {
        transform: scale(1.02);
      }
  
      .card-img-top {
        width: 100%;
        height: 20rem;
        object-fit: cover;
        border-bottom: 1px solid #ccc;
      }
  
      .card-body {
        padding: 1.2rem;
      }
  
      .card-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: #212529;
        margin-bottom: 1rem;
      }
  
      .card-text {
        font-size: 0.95rem;
        line-height: 1.6;
        color: #495057;
      }
  
      .btn-primary {
        display: inline-block;
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        transition: background-color 0.2s ease;
      }
  
      .btn-primary:hover {
        background-color: #0056b3;
      }
  
      .listing-link {
        text-decoration: none;
        color: inherit;
      }
    </style>
    
    <div class="row row-cols-lg-3 row-cols-md-2">
      <% for(let listing of allListings) { %>
        <div class="card" style="width: 20rem">
        <a href="/listings/<%= listing._id %>" class="listing-link">
            <img src="<%= listing.companyImageUrl || 'https://via.placeholder.com/300x200?text=Company+Logo' %>" class="card-img-top" alt="company_logo" style="height: 20rem;" />
            <div class="card-body">
              <h5 class="card-title"><%= listing.title %></h5>
              <p class="card-text">
                <strong>Company:</strong> <%= listing.company %> <br />
                <strong>Location:</strong> <%= listing.location %> (<%= listing.country %>)<br />
                <strong>Employment:</strong> <%= listing.employmentType %><br />
                <strong>Experience:</strong> <%= listing.experience %> (<%= listing.minExp %>â€“<%= listing.maxExp %> yrs)<br />
                <strong>Seniority:</strong> <%= listing.seniorityLevel || 'Not specified' %><br />
                <strong>Company Type:</strong> <%= listing.companyType || 'N/A' %><br />
                <strong>Source:</strong> <%= listing.source %><br />
                <strong>Posted:</strong> <%= listing.postedDateTime.toDateString() %>
              </p>
              <a href="<%= listing.jobLink %>" class="btn btn-primary" target="_blank">Apply Now</a>
          </div>
        </div>
      <% } %>
    </div>
  </body>